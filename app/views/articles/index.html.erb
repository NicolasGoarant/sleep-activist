<%# app/views/articles/index.html.erb %>
<%# Blog Hero %>
<%= content_tag :section, class: "hero", style: "min-height: 50vh; padding-top: 8rem; display: flex; align-items: center; background: linear-gradient(to bottom, rgba(26, 20, 100, 0.6), rgba(15, 11, 61, 0.9));" do %>
  <%= content_tag :div, class: "hero-content", style: "max-width: 800px; margin: 0 auto; text-align: center;" do %>
    <%= content_tag :h1, "Articles", style: "font-size: 3.5rem; margin-bottom: 1.5rem;" %>
    <%= content_tag :p, class: "hero-subtitle", style: "font-size: 1.3rem; line-height: 1.8;" do %>
      D√©couvrez nos r√©flexions et analyses sur le sommeil comme enjeu de soci√©t√©
    <% end %>
  <% end %>
<% end %>

<%# Grille d'articles dynamique %>
<%= content_tag :section, style: "padding: 6rem 5%; max-width: 1400px; margin: 0 auto;" do %>
  
  <% if @articles.any? %>
    <%= content_tag :div, style: "display: grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap: 3rem;" do %>
      
      <% @articles.each do |article| %>
        <%= link_to article_path(article), class: "article-card", style: "text-decoration: none; display: block;" do %>
          <%= content_tag :article, style: "background: rgba(255, 255, 255, 0.03); border-radius: 15px; overflow: hidden; border: 1px solid rgba(184, 181, 232, 0.2); transition: all 0.3s;" do %>
            
            <%# Image de couverture %>
            <%= content_tag :div, style: "height: 250px; background: #{article.cover_gradient_style}; display: flex; align-items: center; justify-content: center; font-size: 5rem;" do %>
              <%= article.emoji %>
            <% end %>
            
            <%# Contenu %>
            <%= content_tag :div, style: "padding: 2rem;" do %>
              <%= content_tag :div, style: "display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;" do %>
                <% if article.category.present? %>
                  <%= content_tag :span, article.category, style: "background: rgba(255, 217, 61, 0.15); padding: 0.3rem 0.8rem; border-radius: 12px; color: #{article.category_color}; font-size: 0.8rem;" %>
                <% end %>
                <%= content_tag :span, "#{article.reading_time} min", style: "color: var(--soft-lavender); font-size: 0.8rem; opacity: 0.7;" %>
              <% end %>
              
              <%= content_tag :h3, article.title, style: "color: var(--warm-cream); font-family: 'Crimson Pro', serif; font-size: 1.5rem; margin-bottom: 1rem; line-height: 1.4;" %>
              
              <%= content_tag :p, style: "color: var(--soft-lavender); line-height: 1.7; font-size: 0.95rem; margin-bottom: 1.5rem; opacity: 0.9;" do %>
                <%= truncate(article.excerpt || article.content, length: 150) %>
              <% end %>
              
              <%= content_tag :div, style: "display: flex; justify-content: space-between; align-items: center; padding-top: 1rem; border-top: 1px solid rgba(184, 181, 232, 0.1);" do %>
                <%= content_tag :span, "Lire l'article", style: "color: var(--moon-yellow); font-weight: 500; font-size: 0.9rem;" %>
                <%= content_tag :span, "‚Üí", style: "color: var(--moon-yellow); font-size: 1.2rem;" %>
              <% end %>
            <% end %>
            
          <% end %>
        <% end %>
      <% end %>
      
    <% end %>

    <%# Pagination %>
    <% if @articles.respond_to?(:total_pages) && @articles.total_pages > 1 %>
      <%= content_tag :div, style: "margin-top: 4rem; text-align: center;" do %>
        <%= paginate @articles %>
      <% end %>
    <% end %>

  <% else %>
    <%# Message si aucun article %>
    <%= content_tag :div, style: "text-align: center; padding: 4rem; background: rgba(255, 255, 255, 0.03); border-radius: 20px; border: 1px solid rgba(184, 181, 232, 0.2);" do %>
      <%= content_tag :h2, "üìù Aucun article publi√© pour le moment", style: "color: var(--warm-cream); font-family: 'Crimson Pro', serif; font-size: 2rem; margin-bottom: 1rem;" %>
      <%= content_tag :p, "Revenez bient√¥t pour d√©couvrir nos premiers articles !", style: "color: var(--soft-lavender); font-size: 1.1rem;" %>
    <% end %>
  <% end %>
  
<% end %>

<%# CTA Newsletter %>
<%= content_tag :section, class: "newsletter-cta" do %>
  <%= content_tag :div, class: "newsletter-box" do %>
    <%= content_tag :h2, "Ne manquez aucun article" %>
    <%= content_tag :p do %>
      Recevez nos nouvelles analyses directement dans votre bo√Æte mail. 
      Une fois par semaine, sans spam.
    <% end %>
    <%= content_tag :div, style: "margin-top: 2rem; display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap;" do %>
      <%= link_to "üìß S'inscrire √† la newsletter", newsletters_path, class: "cta-primary" %>
      <%= link_to "üéôÔ∏è √âcouter le podcast", podcast_path, class: "cta-secondary" %>
    <% end %>
  <% end %>
<% end %>

<style>
.article-card article:hover {
  transform: translateY(-8px);
  box-shadow: 0 15px 50px rgba(255, 217, 61, 0.3);
  border-color: var(--moon-yellow);
}

.article-card:hover h3 {
  color: var(--moon-yellow);
}

@media (max-width: 768px) {
  section > div:first-child {
    grid-template-columns: 1fr !important;
  }
}
</style>
