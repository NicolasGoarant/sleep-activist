<%# app/views/subscribers/new.html.erb %>
<%= content_tag :section, style: "min-height: 100vh; padding: 8rem 5% 4rem; display: flex; align-items: center; background: linear-gradient(to bottom, rgba(26, 20, 100, 0.95), rgba(15, 11, 61, 1));" do %>
  <%= content_tag :div, style: "max-width: 600px; margin: 0 auto; width: 100%;" do %>

    <%# Header %>
    <%= content_tag :div, style: "text-align: center; margin-bottom: 3rem;" do %>
      <%= content_tag :h1, "üìß Inscris-toi √† la newsletter", style: "font-family: 'Crimson Pro', serif; font-size: 2.5rem; color: var(--warm-cream); margin-bottom: 1rem;" %>
      <%= content_tag :p, style: "font-size: 1.1rem; color: var(--soft-lavender); line-height: 1.6;" do %>
        Re√ßois chaque mois nos conseils, d√©couvertes et t√©moignages sur le sommeil. <br>
        <%= content_tag :strong, "Sans spam, promis.", style: "color: var(--moon-yellow);" %>
      <% end %>
    <% end %>

    <%# Formulaire %>
    <%= content_tag :div, style: "background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(184, 181, 232, 0.3); border-radius: 20px; padding: 3rem; backdrop-filter: blur(10px);" do %>

      <%= form_with model: @subscriber, url: subscribers_path, local: true do |f| %>

        <%# Affichage des erreurs %>
        <% if @subscriber.errors.any? %>
          <%= content_tag :div, style: "background: rgba(255, 107, 107, 0.1); border: 1px solid rgba(255, 107, 107, 0.3); border-radius: 10px; padding: 1rem; margin-bottom: 2rem;" do %>
            <%= content_tag :h3, "‚ö†Ô∏è Oups, il y a #{@subscriber.errors.count} erreur(s) :", style: "color: #ff6b6b; font-size: 1rem; margin-bottom: 0.5rem;" %>
            <%= content_tag :ul, style: "color: #ff6b6b; margin-left: 1.5rem;" do %>
              <% @subscriber.errors.full_messages.each do |message| %>
                <%= content_tag :li, message %>
              <% end %>
            <% end %>
          <% end %>
        <% end %>

        <%# Champ Email (requis) %>
        <%= content_tag :div, style: "margin-bottom: 1.5rem;" do %>
          <%= f.label :email, "Email *", style: "display: block; color: var(--soft-lavender); margin-bottom: 0.5rem; font-weight: 500;" %>
          <%= f.email_field :email,
              required: true,
              placeholder: "ton-email@exemple.fr",
              style: "width: 100%; padding: 1rem; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(184, 181, 232, 0.3); border-radius: 10px; color: var(--warm-cream); font-size: 1rem; transition: all 0.3s;",
              onfocus: "this.style.borderColor='var(--moon-yellow)'; this.style.background='rgba(255, 255, 255, 0.15)';",
              onblur: "this.style.borderColor='rgba(184, 181, 232, 0.3)'; this.style.background='rgba(255, 255, 255, 0.1)';" %>
        <% end %>

        <%# Champ Pr√©nom (optionnel) %>
        <%= content_tag :div, style: "margin-bottom: 1.5rem;" do %>
          <%= f.label :first_name, "Pr√©nom (optionnel)", style: "display: block; color: var(--soft-lavender); margin-bottom: 0.5rem; font-weight: 500;" %>
          <%= f.text_field :first_name,
              placeholder: "Ton pr√©nom",
              style: "width: 100%; padding: 1rem; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(184, 181, 232, 0.3); border-radius: 10px; color: var(--warm-cream); font-size: 1rem; transition: all 0.3s;",
              onfocus: "this.style.borderColor='var(--moon-yellow)'; this.style.background='rgba(255, 255, 255, 0.15)';",
              onblur: "this.style.borderColor='rgba(184, 181, 232, 0.3)'; this.style.background='rgba(255, 255, 255, 0.1)';" %>
        <% end %>

        <%# Champ Nom (optionnel) %>
        <%= content_tag :div, style: "margin-bottom: 2rem;" do %>
          <%= f.label :last_name, "Nom (optionnel)", style: "display: block; color: var(--soft-lavender); margin-bottom: 0.5rem; font-weight: 500;" %>
          <%= f.text_field :last_name,
              placeholder: "Ton nom",
              style: "width: 100%; padding: 1rem; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(184, 181, 232, 0.3); border-radius: 10px; color: var(--warm-cream); font-size: 1rem; transition: all 0.3s;",
              onfocus: "this.style.borderColor='var(--moon-yellow)'; this.style.background='rgba(255, 255, 255, 0.15)';",
              onblur: "this.style.borderColor='rgba(184, 181, 232, 0.3)'; this.style.background='rgba(255, 255, 255, 0.1)';" %>
        <% end %>

        <%# Bouton Submit %>
        <%= content_tag :div, style: "text-align: center;" do %>
          <%= f.submit "‚ú® M'inscrire gratuitement",
              style: "padding: 1.2rem 3rem; background: var(--moon-yellow); border: none; border-radius: 50px; color: var(--deep-indigo); font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 10px 30px rgba(255, 217, 61, 0.3);",
              onmouseover: "this.style.transform='translateY(-3px)'; this.style.boxShadow='0 15px 40px rgba(255, 217, 61, 0.5)';",
              onmouseout: "this.style.transform='translateY(0)'; this.style.boxShadow='0 10px 30px rgba(255, 217, 61, 0.3)';" %>
        <% end %>

      <% end %>

      <%# Note de confidentialit√© %>
      <%= content_tag :p, style: "text-align: center; color: var(--soft-lavender); font-size: 0.9rem; margin-top: 2rem; opacity: 0.7;" do %>
        üîí Tes donn√©es sont prot√©g√©es. Tu peux te d√©sinscrire √† tout moment.
      <% end %>
    <% end %>

    <%# Lien retour %>
    <%= content_tag :div, style: "text-align: center; margin-top: 2rem;" do %>
      <%= link_to "‚Üê Retour √† l'accueil", root_path, style: "color: var(--soft-lavender); text-decoration: none; transition: color 0.3s;", onmouseover: "this.style.color='var(--moon-yellow)';", onmouseout: "this.style.color='var(--soft-lavender)';" %>
    <% end %>

  <% end %>
<% end %>
